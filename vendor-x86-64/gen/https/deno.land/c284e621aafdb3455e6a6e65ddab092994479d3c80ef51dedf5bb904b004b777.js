import { PARTIAL_SEARCH_PARAM } from "../../constants.ts";
export class RenderState {
  renderUuid;
  // deno-lint-ignore no-explicit-any
  componentStack;
  renderingUserTemplate = false;
  encounteredIslands = new Set();
  islandProps = [];
  slots = new Map();
  headChildren = false;
  renderedHtmlTag = false;
  // deno-lint-ignore no-explicit-any
  docTitle = null;
  docHtml = null;
  docHead = null;
  docBody = null;
  docHeadNodes = [];
  headVNodes = [];
  // Route options
  routeOptions;
  csp;
  // Preact state
  ownerStack = [];
  owners = new Map();
  #nonce = "";
  error = null;
  isPartial;
  encounteredPartials = new Set();
  partialCount = 0;
  partialDepth = 0;
  islandDepth = 0;
  url;
  basePath;
  constructor(renderUuid, routeOptions, // deno-lint-ignore no-explicit-any
  componentStack, csp, error){
    this.renderUuid = renderUuid;
    this.routeOptions = routeOptions;
    this.csp = csp;
    this.componentStack = componentStack;
    this.url = routeOptions.url;
    this.isPartial = routeOptions.url.searchParams.has(PARTIAL_SEARCH_PARAM);
    this.basePath = routeOptions.basePath;
    if (error) this.routeOptions.error = error;
  }
  getNonce() {
    if (this.#nonce === "") {
      this.#nonce = crypto.randomUUID().replace(/-/g, "");
    }
    return this.#nonce;
  }
  clearTmpState() {
    this.renderingUserTemplate = false;
    this.ownerStack = [];
    this.owners.clear();
    this.encounteredPartials.clear();
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvZnJlc2hAMS42Ljgvc3JjL3NlcnZlci9yZW5kZXJpbmcvc3RhdGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBDb21wb25lbnRDaGlsZHJlbiwgdHlwZSBWTm9kZSB9IGZyb20gXCJwcmVhY3RcIjtcbmltcG9ydCB7IElzbGFuZCB9IGZyb20gXCIuLi90eXBlcy50c1wiO1xuaW1wb3J0IHsgQ29udGVudFNlY3VyaXR5UG9saWN5IH0gZnJvbSBcIi4uLy4uL3J1bnRpbWUvY3NwLnRzXCI7XG5pbXBvcnQgeyBQQVJUSUFMX1NFQVJDSF9QQVJBTSB9IGZyb20gXCIuLi8uLi9jb25zdGFudHMudHNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBSZW5kZXJTdGF0ZVJvdXRlT3B0aW9ucyB7XG4gIHVybDogVVJMO1xuICByb3V0ZTogc3RyaW5nO1xuICAvLyBkZW5vLWxpbnQtaWdub3JlIG5vLWV4cGxpY2l0LWFueVxuICBkYXRhPzogYW55O1xuICAvLyBkZW5vLWxpbnQtaWdub3JlIG5vLWV4cGxpY2l0LWFueVxuICBzdGF0ZT86IGFueTtcbiAgZXJyb3I/OiB1bmtub3duO1xuICBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPjtcbiAgYmFzZVBhdGg6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFJlbmRlclN0YXRlIHtcbiAgcmVhZG9ubHkgcmVuZGVyVXVpZDogc3RyaW5nO1xuICAvLyBkZW5vLWxpbnQtaWdub3JlIG5vLWV4cGxpY2l0LWFueVxuICBjb21wb25lbnRTdGFjazogYW55W107XG4gIHJlbmRlcmluZ1VzZXJUZW1wbGF0ZSA9IGZhbHNlO1xuICBlbmNvdW50ZXJlZElzbGFuZHMgPSBuZXcgU2V0PElzbGFuZD4oKTtcbiAgaXNsYW5kUHJvcHM6IHVua25vd25bXSA9IFtdO1xuICBzbG90cyA9IG5ldyBNYXA8c3RyaW5nLCBDb21wb25lbnRDaGlsZHJlbj4oKTtcbiAgaGVhZENoaWxkcmVuID0gZmFsc2U7XG4gIHJlbmRlcmVkSHRtbFRhZyA9IGZhbHNlO1xuICAvLyBkZW5vLWxpbnQtaWdub3JlIG5vLWV4cGxpY2l0LWFueVxuICBkb2NUaXRsZTogVk5vZGU8YW55PiB8IG51bGwgPSBudWxsO1xuICBkb2NIdG1sOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGwgPSBudWxsO1xuICBkb2NIZWFkOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGwgPSBudWxsO1xuICBkb2NCb2R5OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGwgPSBudWxsO1xuICBkb2NIZWFkTm9kZXM6IHsgdHlwZTogc3RyaW5nOyBwcm9wczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfVtdID0gW107XG4gIGhlYWRWTm9kZXM6IENvbXBvbmVudENoaWxkcmVuW10gPSBbXTtcbiAgLy8gUm91dGUgb3B0aW9uc1xuICByb3V0ZU9wdGlvbnM6IFJlbmRlclN0YXRlUm91dGVPcHRpb25zO1xuICBjc3A6IENvbnRlbnRTZWN1cml0eVBvbGljeSB8IHVuZGVmaW5lZDtcbiAgLy8gUHJlYWN0IHN0YXRlXG4gIG93bmVyU3RhY2s6IFZOb2RlW10gPSBbXTtcbiAgb3duZXJzID0gbmV3IE1hcDxWTm9kZSwgVk5vZGU+KCk7XG4gICNub25jZSA9IFwiXCI7XG4gIGVycm9yOiBFcnJvciB8IG51bGwgPSBudWxsO1xuICBpc1BhcnRpYWw6IGJvb2xlYW47XG4gIGVuY291bnRlcmVkUGFydGlhbHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgcGFydGlhbENvdW50ID0gMDtcbiAgcGFydGlhbERlcHRoID0gMDtcbiAgaXNsYW5kRGVwdGggPSAwO1xuICB1cmw6IFVSTDtcbiAgYmFzZVBhdGg6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihcbiAgICByZW5kZXJVdWlkOiBzdHJpbmcsXG4gICAgcm91dGVPcHRpb25zOiBSZW5kZXJTdGF0ZVJvdXRlT3B0aW9ucyxcbiAgICAvLyBkZW5vLWxpbnQtaWdub3JlIG5vLWV4cGxpY2l0LWFueVxuICAgIGNvbXBvbmVudFN0YWNrOiBhbnlbXSxcbiAgICBjc3A/OiBDb250ZW50U2VjdXJpdHlQb2xpY3ksXG4gICAgZXJyb3I/OiB1bmtub3duLFxuICApIHtcbiAgICB0aGlzLnJlbmRlclV1aWQgPSByZW5kZXJVdWlkO1xuICAgIHRoaXMucm91dGVPcHRpb25zID0gcm91dGVPcHRpb25zO1xuICAgIHRoaXMuY3NwID0gY3NwO1xuICAgIHRoaXMuY29tcG9uZW50U3RhY2sgPSBjb21wb25lbnRTdGFjaztcbiAgICB0aGlzLnVybCA9IHJvdXRlT3B0aW9ucy51cmw7XG4gICAgdGhpcy5pc1BhcnRpYWwgPSByb3V0ZU9wdGlvbnMudXJsLnNlYXJjaFBhcmFtcy5oYXMoUEFSVElBTF9TRUFSQ0hfUEFSQU0pO1xuICAgIHRoaXMuYmFzZVBhdGggPSByb3V0ZU9wdGlvbnMuYmFzZVBhdGg7XG5cbiAgICBpZiAoZXJyb3IpIHRoaXMucm91dGVPcHRpb25zLmVycm9yID0gZXJyb3I7XG4gIH1cblxuICBnZXROb25jZSgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLiNub25jZSA9PT0gXCJcIikge1xuICAgICAgdGhpcy4jbm9uY2UgPSBjcnlwdG8ucmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgXCJcIik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLiNub25jZTtcbiAgfVxuXG4gIGNsZWFyVG1wU3RhdGUoKSB7XG4gICAgdGhpcy5yZW5kZXJpbmdVc2VyVGVtcGxhdGUgPSBmYWxzZTtcbiAgICB0aGlzLm93bmVyU3RhY2sgPSBbXTtcbiAgICB0aGlzLm93bmVycy5jbGVhcigpO1xuICAgIHRoaXMuZW5jb3VudGVyZWRQYXJ0aWFscy5jbGVhcigpO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsU0FBUyxvQkFBb0IsUUFBUSxxQkFBcUI7QUFjMUQsT0FBTyxNQUFNO0VBQ0YsV0FBbUI7RUFDNUIsbUNBQW1DO0VBQ25DLGVBQXNCO0VBQ3RCLHdCQUF3QixNQUFNO0VBQzlCLHFCQUFxQixJQUFJLE1BQWM7RUFDdkMsY0FBeUIsRUFBRSxDQUFDO0VBQzVCLFFBQVEsSUFBSSxNQUFpQztFQUM3QyxlQUFlLE1BQU07RUFDckIsa0JBQWtCLE1BQU07RUFDeEIsbUNBQW1DO0VBQ25DLFdBQThCLEtBQUs7RUFDbkMsVUFBMEMsS0FBSztFQUMvQyxVQUEwQyxLQUFLO0VBQy9DLFVBQTBDLEtBQUs7RUFDL0MsZUFBbUUsRUFBRSxDQUFDO0VBQ3RFLGFBQWtDLEVBQUUsQ0FBQztFQUNyQyxnQkFBZ0I7RUFDaEIsYUFBc0M7RUFDdEMsSUFBdUM7RUFDdkMsZUFBZTtFQUNmLGFBQXNCLEVBQUUsQ0FBQztFQUN6QixTQUFTLElBQUksTUFBb0I7RUFDakMsQ0FBQSxLQUFNLEdBQUcsR0FBRztFQUNaLFFBQXNCLEtBQUs7RUFDM0IsVUFBbUI7RUFDbkIsc0JBQXNCLElBQUksTUFBYztFQUN4QyxlQUFlLEVBQUU7RUFDakIsZUFBZSxFQUFFO0VBQ2pCLGNBQWMsRUFBRTtFQUNoQixJQUFTO0VBQ1QsU0FBaUI7RUFFakIsWUFDRSxVQUFrQixFQUNsQixZQUFxQyxFQUNyQyxtQ0FBbUM7RUFDbkMsY0FBcUIsRUFDckIsR0FBMkIsRUFDM0IsS0FBZSxDQUNmO0lBQ0EsSUFBSSxDQUFDLFVBQVUsR0FBRztJQUNsQixJQUFJLENBQUMsWUFBWSxHQUFHO0lBQ3BCLElBQUksQ0FBQyxHQUFHLEdBQUc7SUFDWCxJQUFJLENBQUMsY0FBYyxHQUFHO0lBQ3RCLElBQUksQ0FBQyxHQUFHLEdBQUcsYUFBYSxHQUFHO0lBQzNCLElBQUksQ0FBQyxTQUFTLEdBQUcsYUFBYSxHQUFHLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQztJQUNuRCxJQUFJLENBQUMsUUFBUSxHQUFHLGFBQWEsUUFBUTtJQUVyQyxJQUFJLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLEdBQUc7RUFDdkM7RUFFQSxXQUFtQjtJQUNqQixJQUFJLElBQUksQ0FBQyxDQUFBLEtBQU0sS0FBSyxJQUFJO01BQ3RCLElBQUksQ0FBQyxDQUFBLEtBQU0sR0FBRyxPQUFPLFVBQVUsR0FBRyxPQUFPLENBQUMsTUFBTTtJQUNsRDtJQUNBLE9BQU8sSUFBSSxDQUFDLENBQUEsS0FBTTtFQUNwQjtFQUVBLGdCQUFnQjtJQUNkLElBQUksQ0FBQyxxQkFBcUIsR0FBRztJQUM3QixJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUU7SUFDcEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLO0lBQ2pCLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLO0VBQ2hDO0FBQ0YifQ==
// denoCacheMetadata=12553238068963054506,6935747009963730338