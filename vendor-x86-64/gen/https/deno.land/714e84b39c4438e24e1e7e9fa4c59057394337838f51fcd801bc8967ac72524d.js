import { options as preactOptions } from "preact";
import { setup as twSetup, tw } from "twind";
export const STYLE_ELEMENT_ID = "__FRSH_TWIND";
export function setup(options, sheet) {
  const config = {
    ...options,
    mode: "silent",
    sheet
  };
  twSetup(config);
  // Hook into options._diff which is called whenever a new comparison
  // starts in Preact.
  const originalHook = preactOptions.__b;
  preactOptions.__b = (// deno-lint-ignore no-explicit-any
  vnode)=>{
    if (typeof vnode.type === "string" && typeof vnode.props === "object") {
      const { props } = vnode;
      const classes = [];
      if (props.class) {
        classes.push(tw(props.class));
        props.class = undefined;
      }
      if (props.className) {
        classes.push(tw(props.className));
        props.className = undefined;
      }
      if (classes.length) {
        props.class = classes.join(" ");
      }
    }
    originalHook?.(vnode);
  };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvZnJlc2hAMS42LjgvcGx1Z2lucy90d2luZC9zaGFyZWQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSlNYLCBvcHRpb25zIGFzIHByZWFjdE9wdGlvbnMsIFZOb2RlIH0gZnJvbSBcInByZWFjdFwiO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiwgc2V0dXAgYXMgdHdTZXR1cCwgU2hlZXQsIHR3IH0gZnJvbSBcInR3aW5kXCI7XG5cbnR5cGUgUHJlYWN0T3B0aW9ucyA9IHR5cGVvZiBwcmVhY3RPcHRpb25zICYgeyBfX2I/OiAodm5vZGU6IFZOb2RlKSA9PiB2b2lkIH07XG5cbmV4cG9ydCBjb25zdCBTVFlMRV9FTEVNRU5UX0lEID0gXCJfX0ZSU0hfVFdJTkRcIjtcblxuZXhwb3J0IGludGVyZmFjZSBPcHRpb25zIGV4dGVuZHMgT21pdDxDb25maWd1cmF0aW9uLCBcIm1vZGVcIiB8IFwic2hlZXRcIj4ge1xuICAvKiogVGhlIGltcG9ydC5tZXRhLnVybCBvZiB0aGUgbW9kdWxlIGRlZmluaW5nIHRoZXNlIG9wdGlvbnMuICovXG4gIHNlbGZVUkw6IHN0cmluZztcbn1cblxuZGVjbGFyZSBtb2R1bGUgXCJwcmVhY3RcIiB7XG4gIG5hbWVzcGFjZSBKU1gge1xuICAgIGludGVyZmFjZSBET01BdHRyaWJ1dGVzPFRhcmdldCBleHRlbmRzIEV2ZW50VGFyZ2V0PiB7XG4gICAgICBjbGFzcz86IHN0cmluZztcbiAgICAgIGNsYXNzTmFtZT86IHN0cmluZztcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwKG9wdGlvbnM6IE9wdGlvbnMsIHNoZWV0OiBTaGVldCkge1xuICBjb25zdCBjb25maWc6IENvbmZpZ3VyYXRpb24gPSB7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBtb2RlOiBcInNpbGVudFwiLFxuICAgIHNoZWV0LFxuICB9O1xuICB0d1NldHVwKGNvbmZpZyk7XG5cbiAgLy8gSG9vayBpbnRvIG9wdGlvbnMuX2RpZmYgd2hpY2ggaXMgY2FsbGVkIHdoZW5ldmVyIGEgbmV3IGNvbXBhcmlzb25cbiAgLy8gc3RhcnRzIGluIFByZWFjdC5cbiAgY29uc3Qgb3JpZ2luYWxIb29rID0gKHByZWFjdE9wdGlvbnMgYXMgUHJlYWN0T3B0aW9ucykuX19iO1xuICAocHJlYWN0T3B0aW9ucyBhcyBQcmVhY3RPcHRpb25zKS5fX2IgPSAoXG4gICAgLy8gZGVuby1saW50LWlnbm9yZSBuby1leHBsaWNpdC1hbnlcbiAgICB2bm9kZTogVk5vZGU8SlNYLkRPTUF0dHJpYnV0ZXM8YW55Pj4sXG4gICkgPT4ge1xuICAgIGlmICh0eXBlb2Ygdm5vZGUudHlwZSA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2Ygdm5vZGUucHJvcHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIGNvbnN0IHsgcHJvcHMgfSA9IHZub2RlO1xuICAgICAgY29uc3QgY2xhc3Nlczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGlmIChwcm9wcy5jbGFzcykge1xuICAgICAgICBjbGFzc2VzLnB1c2godHcocHJvcHMuY2xhc3MpKTtcbiAgICAgICAgcHJvcHMuY2xhc3MgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZiAocHJvcHMuY2xhc3NOYW1lKSB7XG4gICAgICAgIGNsYXNzZXMucHVzaCh0dyhwcm9wcy5jbGFzc05hbWUpKTtcbiAgICAgICAgcHJvcHMuY2xhc3NOYW1lID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKGNsYXNzZXMubGVuZ3RoKSB7XG4gICAgICAgIHByb3BzLmNsYXNzID0gY2xhc3Nlcy5qb2luKFwiIFwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBvcmlnaW5hbEhvb2s/Lih2bm9kZSk7XG4gIH07XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsU0FBYyxXQUFXLGFBQWEsUUFBZSxTQUFTO0FBQzlELFNBQXdCLFNBQVMsT0FBTyxFQUFTLEVBQUUsUUFBUSxRQUFRO0FBSW5FLE9BQU8sTUFBTSxtQkFBbUIsZUFBZTtBQWdCL0MsT0FBTyxTQUFTLE1BQU0sT0FBZ0IsRUFBRSxLQUFZO0VBQ2xELE1BQU0sU0FBd0I7SUFDNUIsR0FBRyxPQUFPO0lBQ1YsTUFBTTtJQUNOO0VBQ0Y7RUFDQSxRQUFRO0VBRVIsb0VBQW9FO0VBQ3BFLG9CQUFvQjtFQUNwQixNQUFNLGVBQWUsQUFBQyxjQUFnQyxHQUFHO0VBQ3hELGNBQWdDLEdBQUcsR0FBRyxDQUNyQyxtQ0FBbUM7RUFDbkM7SUFFQSxJQUFJLE9BQU8sTUFBTSxJQUFJLEtBQUssWUFBWSxPQUFPLE1BQU0sS0FBSyxLQUFLLFVBQVU7TUFDckUsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHO01BQ2xCLE1BQU0sVUFBb0IsRUFBRTtNQUM1QixJQUFJLE1BQU0sS0FBSyxFQUFFO1FBQ2YsUUFBUSxJQUFJLENBQUMsR0FBRyxNQUFNLEtBQUs7UUFDM0IsTUFBTSxLQUFLLEdBQUc7TUFDaEI7TUFDQSxJQUFJLE1BQU0sU0FBUyxFQUFFO1FBQ25CLFFBQVEsSUFBSSxDQUFDLEdBQUcsTUFBTSxTQUFTO1FBQy9CLE1BQU0sU0FBUyxHQUFHO01BQ3BCO01BQ0EsSUFBSSxRQUFRLE1BQU0sRUFBRTtRQUNsQixNQUFNLEtBQUssR0FBRyxRQUFRLElBQUksQ0FBQztNQUM3QjtJQUNGO0lBRUEsZUFBZTtFQUNqQjtBQUNGIn0=
// denoCacheMetadata=9084239055029179312,12860570639496455521